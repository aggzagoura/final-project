(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{23:function(t,n,e){},40:function(t,n,e){"use strict";e.r(n);var o=e(27),c=e(6),r=(e(23),e(8),e(24)),i=e(20),u=e(2),s=e(44),a=e(43),l=e(12).a.cancel;function b(t){return Object(u.q)((function(n){return{type:"SPEAK",value:t}}))}function p(t,n,e){return{initial:"prompt",states:{prompt:{entry:b(t),on:{ENDSPEECH:"ask"}},hist:{type:"history"},maxspeech:{entry:b(n),on:{ENDSPEECH:"ask"}},ask:{entry:[Object(u.q)("LISTEN"),Object(u.q)("MAXSPEECH",{delay:5e3,id:"maxsp"})]},help:{entry:b(e),on:{ENDSPEECH:"hist"}},nomatch:{entry:b("Sorry, please say your English in a clear way"),on:{ENDSPEECH:"prompt"}}}}}function f(t,n){return{entry:b(t),on:{ENDSPEECH:n}}}var d={help:"h",Help:"H"},m={count:0},h={scores:0},g={initial:"init",states:{init:{on:{CLICK:"welcome"}},welcome:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{target:"query",cond:function(t){return!(t.recResult in d)},actions:[Object(u.b)((function(t){return{option:t.recResult}})),Object(u.b)((function(t){m.count=0})),l("maxsp")]},{target:".help",cond:function(t){return t.recResult in d}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return m.count<=2},actions:Object(u.b)((function(t){m.count=m.count+1}))},{target:"#root.dm.init",cond:function(t){return m.count>2},actions:Object(u.b)((function(t){m.count=0}))}]}},p("What would you like to do?","You did not respond\uff0cjust tell me what you want to do","Please kindly tell me what you want to do")),query:{invoke:{id:"rasa",src:function(t,n){return O(t.option)},onDone:{target:"menu",actions:[Object(u.b)((function(t,n){return{option:n.data.intent.name}})),function(t,n){return console.log(n.data)}]},onError:{target:"welcome",actions:function(t,n){return console.log(n.data)}}}},menu:{initial:"prompt",on:{ENDSPEECH:[{target:"todo",cond:function(t){return"todo"===t.option}},{target:"timer",cond:function(t){return"timer"===t.option}},{target:"game",cond:function(t){return"game"===t.option}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"OK. I understand\uff0cyou want a ".concat(t.option,".")}}))}}},todo:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:'Let"s create a to do item'}}))}}},timer:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:'Let"s create a timer'}}))}}},game:{initial:"prompt",on:{ENDSPEECH:"question1"},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:'Let"s play How well do you know me?'}}))}}},question1:Object(c.a)({on:{RECOGNISED:[{cond:function(t){return"a"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint1"},{cond:function(t){return"A"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint1"},{cond:function(t){return"mint green"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint1"},{cond:function(t){return"b"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint2"},{cond:function(t){return"B"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint2"},{cond:function(t){return"purple"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint2"},{target:".nomatch",cond:function(t){return!(t.recResult in d)},actions:l("maxsp")},{target:".help",cond:function(t){return t.recResult in d}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return m.count<=2},actions:Object(u.b)((function(t){m.count=m.count+1}))},{target:"#root.dm.init",cond:function(t){return m.count>2},actions:Object(u.b)((function(t){m.count=0}))}]}},p("What colour do I like?  A mint green, B purple","You did not respond, please tell me the colour","Just choose one colour")),hint1:Object(c.a)({},f("Yes! You are right! Let's move to the next question.","question2")),hint2:Object(c.a)({},f("Sorry! you are wrong! Let's move to the next question.","question2")),question2:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{cond:function(t){return"a"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint3"},{cond:function(t){return"A"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint3"},{cond:function(t){return"pizza"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint3"},{cond:function(t){return"b"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint4"},{cond:function(t){return"B"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint4"},{cond:function(t){return"dumplings"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint4"},{target:".nomatch",cond:function(t){return!(t.recResult in d)},actions:l("maxsp")},{target:".help",cond:function(t){return t.recResult in d}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return m.count<=2},actions:Object(u.b)((function(t){m.count=m.count+1}))},{target:"#root.dm.init",cond:function(t){return m.count>2},actions:Object(u.b)((function(t){m.count=0}))}]}},p("What's my favourite food?  A pizza, B dumplings","You did not respond, please tell me your answer","Just choose one food")),hint3:Object(c.a)({},f("Yes! You are right! Let's continue to the next question.","question3")),hint4:Object(c.a)({},f("Sorry! you are wrong! Let's contiue to the next question.","question3")),question3:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{cond:function(t){return"b"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint5"},{cond:function(t){return"B"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint5"},{cond:function(t){return"lavender"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint5"},{cond:function(t){return"a"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint6"},{cond:function(t){return"A"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint6"},{cond:function(t){return"rosa"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint6"},{target:".nomatch",cond:function(t){return!(t.recResult in d)},actions:l("maxsp")},{target:".help",cond:function(t){return t.recResult in d}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return m.count<=2},actions:Object(u.b)((function(t){m.count=m.count+1}))},{target:"#root.dm.init",cond:function(t){return m.count>2},actions:Object(u.b)((function(t){m.count=0}))}]}},p("What's my favourite flower?  A rose, B lavender","You did not respond, please tell me your answer","Just choose one country")),hint5:Object(c.a)({},f("Yes! You are right! Let's continue to the next question.","question4")),hint6:Object(c.a)({},f("Sorry! you are wrong! Let's contiue to the next question.","question4")),question4:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{cond:function(t){return"b"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint7"},{cond:function(t){return"B"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint7"},{cond:function(t){return"cat"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint7"},{cond:function(t){return"a"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint8"},{cond:function(t){return"A"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint8"},{cond:function(t){return"dog"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint8"},{target:".nomatch",cond:function(t){return!(t.recResult in d)},actions:l("maxsp")},{target:".help",cond:function(t){return t.recResult in d}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return m.count<=2},actions:Object(u.b)((function(t){m.count=m.count+1}))},{target:"#root.dm.init",cond:function(t){return m.count>2},actions:Object(u.b)((function(t){m.count=0}))}]}},p("What's my favourite pet?  A dog, B cat","You did not respond, please tell me your answer","Just choose one food")),hint7:Object(c.a)({},f("Yes! You are right! Let's continue to the next question.","question5")),hint8:Object(c.a)({},f("Sorry! you are wrong! Let's contiue to the next question.","question5")),question5:Object(c.a)({initial:"prompt",on:{RECOGNISED:[{cond:function(t){return"b"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint9"},{cond:function(t){return"B"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint9"},{cond:function(t){return"coffee"===t.recResult},actions:[Object(u.b)((function(t){h.scores=h.scores+1})),Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint9"},{cond:function(t){return"a"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint10"},{cond:function(t){return"A"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint10"},{cond:function(t){return"tea"===t.recResult},actions:[Object(u.b)((function(t){m.count=0})),l("maxsp")],target:"hint10"},{target:".nomatch",cond:function(t){return!(t.recResult in d)},actions:l("maxsp")},{target:".help",cond:function(t){return t.recResult in d}}],MAXSPEECH:[{target:".maxspeech",cond:function(t){return m.count<=2},actions:Object(u.b)((function(t){m.count=m.count+1}))},{target:"#root.dm.init",cond:function(t){return m.count>2},actions:Object(u.b)((function(t){m.count=0}))}]}},p("What's my favourite drink?  A tea, B coffee","You did not respond, please tell me your answer","Just choose one drink")),hint9:Object(c.a)({},f("Yes! You are right! Let's continue to the next question.","conclusion")),hint10:Object(c.a)({},f("Sorry! you are wrong! Let's contiue to the next question.","conclusion")),conclusion:{initial:"prompt",on:{ENDSPEECH:[{target:"success",cond:function(t){return h.scores>=3}},{target:"failure",cond:function(t){return h.scores<3}}]},states:{prompt:{entry:Object(u.q)((function(t){return{type:"SPEAK",value:"Congratulations! Your final score is ".concat(h.scores," out of 5.")}}))}}},success:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:b("You can have a date with me!")}}},failure:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:b("Sorry, you need to try harder!")}}}}},O=function(t){return fetch(new Request("https://cors-anywhere.herokuapp.com/https://finalprojectgame.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://localhost:3000/react-xstate-colourchanger"},body:'{"text": "'.concat(t,'"}')})).then((function(t){return t.json()}))},j=e(22),E=e(13);Object(a.a)({url:"https://statecharts.io/inspect",iframe:!1});var y=Object(i.a)({id:"root",type:"parallel",states:{dm:Object(c.a)({},g),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(u.b)((function(t,n){return{ttsAgenda:n.value}}))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(u.b)((function(t,n){return{recResult:n.value}}))],target:".match"},RECOGNISED:"idle",MAXSPEECH:"idle"},states:{progress:{},match:{entry:Object(u.q)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:function(t){console.log("<< ASR: "+t.recResult)},test:function(){console.log("test")},logIntent:function(t){console.log("<< NLU intent: "+t.nluData.intent.name)}}}),R=function(t){switch(!0){case t.state.matches({asrtts:"recognising"}):return Object(E.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},t),{},{children:"listen!"}));case t.state.matches({asrtts:"speaking"}):return Object(E.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},t),{},{children:"speak!"}));default:return Object(E.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:"glow-on-hover"},t),{},{children:"Welcome!"}))}};function x(){var t=Object(j.useSpeechSynthesis)({onEnd:function(){b("ENDSPEECH")}}),n=t.speak,e=t.cancel,c=(t.speaking,Object(j.useSpeechRecognition)({onResult:function(t){b({type:"ASRRESULT",value:t})}})),r=c.listen,i=(c.listening,c.stop),u=Object(s.b)(y,{devTools:!0,actions:{recStart:Object(s.a)((function(){console.log("Ready to receive your speech."),r({interimResults:!1,continuous:!0})})),recStop:Object(s.a)((function(){console.log("Recognition stopped."),i()})),changeColour:Object(s.a)((function(t){console.log("Repainting..."),document.body.style.background=t.recResult})),ttsStart:Object(s.a)((function(t,e){console.log("Speaking..."),n({text:t.ttsAgenda})})),ttsCancel:Object(s.a)((function(t,n){console.log("TTS STOP..."),e()}))}}),a=Object(o.a)(u,3),l=a[0],b=a[1];a[2];return Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(R,{state:l,onClick:function(){return b("CLICK")}})})}var S=document.getElementById("root");r.render(Object(E.jsx)(x,{}),S)}},[[40,1,2]]]);
//# sourceMappingURL=main.d6c73e03.chunk.js.map